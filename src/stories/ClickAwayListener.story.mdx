import { useState, useEffect } from "react";
import { Meta, ArgsTable } from "@storybook/addon-docs/blocks";
import { StoryAnchor, ImportSnippet, Story } from "stories/components";
import { ClickAwayListener, Button } from "lib/components";
import { STORIES } from "stories/config";

export const config = STORIES.CLICK_AWAY_LISTENER;

<Meta title={config.title} component={config.Component} anchor />

<style>{`
  .root {
    position: relative;
  }
  .popup {
    position: fixed;
    border: 1px solid black;
    width: 250px;
    background-color: white;
    z-index: 999999;
    margin-left: -70px;
    padding: 10px;
  }
`}</style>

<StoryAnchor name="API" path={config.path} />

# ClickAwayListener

#### Detect if a click event happened outside of an element. It listens for clicks that occur somewhere in the document.

<Story name="API">
  {() => {
    const [open, setOpen] = useState(false);
    const handleClick = () => setOpen((prev) => !prev);
    const handleClickAway = () => setOpen(false);
    return (
      <div className="root">
        <Button onClick={handleClick}>Click Me</Button>
        <ClickAwayListener onClickAway={handleClickAway}>
          {open ? (
            <div className="popup">
              Click me, I will stay visible until you click outside.
            </div>
          ) : null}
        </ClickAwayListener>
      </div>
    );
  }}
</Story>

#### Import

<ImportSnippet componentName={config.componentName} />

<ArgsTable of={config.Component} story="API" />
