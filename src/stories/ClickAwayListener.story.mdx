import { useState, useEffect } from "react";
import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  SourceState,
  Source,
  Anchor,
  Title,
  Heading,
  Subheading,
} from "@storybook/addon-docs/blocks";
import { StoryAnchor } from "stories/components";
import { ClickAwayListener, Button } from "lib/components";

<Meta title="Utils/ClickAwayListener" anchor />

<style>{`
  .root {
    position: relative;
  }
  .popup {
    position: fixed;
    border: 1px solid black;
    width: 250px;
    background-color: white;
    z-index: 999999;
    margin-left: -70px;
    padding: 10px;
  }
`}</style>


<StoryAnchor name="Basic" />

# ClickAwayListener

#### Detect if a click event happened outside of an element. It listens for clicks that occur somewhere in the document.

<Canvas isExpanded withSource={SourceState.OPEN}>
  <Story
    name="Basic"
    parameters={{
      layout: "centered",
    }}
  >
    {() => {
      const [open, setOpen] = useState(false);
      const handleClick = () => setOpen((prev) => !prev);
      const handleClickAway = () => setOpen(false);
      return (
        <div className="root">
          <Button onClick={handleClick}>Click Me</Button>
          <ClickAwayListener onClickAway={handleClickAway}>
            {open ? (
              <div className="popup">
                Click me, I will stay visible until you click outside.
              </div>
            ) : null}
          </ClickAwayListener>
        </div>
      );
    }}
  </Story>
</Canvas>
